(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(t,e,n){t.exports=n(29)},24:function(t,e,n){},29:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(10),i=n.n(r),c=n(3),u=n(4),l=n(6),s=n(5),d=n(7),p=(n(24),n(1)),h=function(t){return{type:"SWITCH_PAGE",payload:t}},f=function(t){var e={todoText:t};return fetch("http://localhost:3003/todos",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(e)})},m=function(t){return fetch("http://localhost:3003/todos",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({_id:t})})},g=function(t,e){var n={todoText:e,id:t};return fetch("http://localhost:3003/todos",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"PUT",body:JSON.stringify(n)})},O=function(){return function(t){return t({type:"GET_TODOS_BEGIN"}),fetch("http://localhost:3003/todos").then(function(t){return t.json()}).then(function(e){t({type:"GET_TODOS_SUCCESS",payload:{todos:e}})}).catch(function(e){t({type:"GET_TODOS_FAIL",payload:{error:e}})})}},b=function(t){function e(){var t,n;Object(c.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).deleteTodo=function(){m(n.props.todo._id).then(function(t){200===t.status&&n.props.getTodos()})},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.todo,e=t.text,n=t._id,o=this.props.switchPage;return a.a.createElement("li",null,a.a.createElement("label",null,e),a.a.createElement("button",{onClick:o.bind(null,{name:"edit",info:{text:e,_id:n}})},"edit"),a.a.createElement("button",{onClick:this.deleteTodo},"delete"))}}]),e}(o.Component),y=Object(p.b)(null,function(t){return{switchPage:function(e){t(h(e))},getTodos:function(){t(O())}}})(b),E=function(t){var e=t.todos;return a.a.createElement("ul",null,e.map(function(t,e){return a.a.createElement(y,{key:t._id,todo:t})}))},v=function(t){function e(){var t,n;Object(c.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).state={inputValue:""},n.addTodo=function(t){t.preventDefault(),f(n.state.inputValue).then(function(t){200===t.status?(n.setState({inputValue:""}),n.props.getTodos()):console.error("change text")})},n.onChange=function(t){n.setState({inputValue:t.target.value})},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"componentDidMount",value:function(){this.props.getTodos()}},{key:"render",value:function(){var t=this.props,e=t.isLoading,n=t.error;return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("input",{onChange:this.onChange,value:this.state.inputValue,type:"text"}),a.a.createElement("input",{onClick:this.addTodo,type:"submit"})),n?a.a.createElement("div",null,"error"):a.a.createElement(E,{todos:this.props.todos}),e?a.a.createElement("div",null,"Loading ..."):null)}}]),e}(o.Component),j=Object(p.b)(function(t){return{todos:t.todosReducer.todos,isLoading:t.todosReducer.isLoading,error:t.todosReducer.error}},function(t){return{getTodos:function(){t(O())}}})(v),T=function(t){function e(){var t,n;Object(c.a)(this,e);for(var o=arguments.length,a=new Array(o),r=0;r<o;r++)a[r]=arguments[r];return(n=Object(l.a)(this,(t=Object(s.a)(e)).call.apply(t,[this].concat(a)))).state={inputValue:"",isLoading:!1,error:null},n.editTodo=function(t){t.preventDefault();var e=n.props.info._id,o=n.state.inputValue;n.setState({isLoading:!0}),g(e,o).then(function(t){200===t.status?n.props.switchPage({name:"main",info:null}):n.setState({error:"error",isLoading:!1})})},n.onChange=function(t){n.setState({inputValue:t.target.value})},n}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props.info.text,e=this.state,n=e.isLoading,o=e.error;return a.a.createElement("div",null,a.a.createElement("form",null,a.a.createElement("input",{onChange:this.onChange,defaultValue:t,type:"text"}),a.a.createElement("input",{onClick:this.editTodo,type:"submit"})),o?a.a.createElement("div",null,"change text"):null,n?a.a.createElement("div",null,"Loading ..."):null)}}]),e}(o.Component),C=Object(p.b)(null,function(t){return{switchPage:function(e){t(h(e))}}})(T),S=function(t){function e(){return Object(c.a)(this,e),Object(l.a)(this,Object(s.a)(e).apply(this,arguments))}return Object(d.a)(e,t),Object(u.a)(e,[{key:"render",value:function(){var t=this.props,e=t.pageName,n=t.pageInfo;return a.a.createElement("div",{className:"App"},"main"===e?a.a.createElement(j,null):a.a.createElement(C,{info:n}))}}]),e}(o.Component),_=Object(p.b)(function(t){return{pageName:t.switchPageReducer.name,pageInfo:t.switchPageReducer.info}})(S),w=n(18),L=n(8),k={name:"main",info:null},A=n(14),P={todos:[],isLoading:!1,error:null},x=Object(L.c)({switchPageReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SWITCH_PAGE":return{name:e.payload.name,info:e.payload.info};default:return t}},todosReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"GET_TODOS_BEGIN":return Object(A.a)({},t,{isLoading:!0,error:null});case"GET_TODOS_SUCCESS":return{isLoading:!1,todos:e.payload.todos.todos,error:null};case"GET_TODOS_FAIL":return Object(A.a)({},t,{isLoading:!1,error:e.payload.error});default:return t}}}),D=Object(L.d)(x,Object(L.a)(w.a));i.a.render(a.a.createElement(p.a,{store:D},a.a.createElement(_,null)),document.getElementById("root"))}},[[19,1,2]]]);
//# sourceMappingURL=main.8def25a2.chunk.js.map